import { useState } from 'react'

export default function StudentLogin(){
  const [pin, setPin] = useState('')
  async function start(){
    const res = await fetch('/api/student/session', { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify({pin}) })
    if(res.ok){
      const data = await res.json()
      window.location = `/student/test?attemptId=${data.attemptId}`
    } else {
      alert('PIN not found. Ask your teacher.')
    }
  }
  return (
    <div style={{padding:20}}>
      <h2>Student login (4-digit PIN)</h2>
      <input value={pin} onChange={e=>setPin(e.target.value)} maxLength={6} placeholder="Enter PIN" />
      <button onClick={start} style={{marginLeft:8}}>Start</button>
    </div>
  )
}
